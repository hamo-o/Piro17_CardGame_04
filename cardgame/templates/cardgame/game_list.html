<!DOCTYPE html>
<html lang="en">
  {% load static %}
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Prompt:wght@500&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="{% static 'css/game_list.css' %}" />
    <title>4ì¡°</title>
  </head>
  <body>
    <nav class="navbar">
      <div class="navbar-title"><a href="/">PIROGRAM CARDGAME</a></div>
      <ul class="navbar-list">
        <li><a href="{% url 'cardgame:attack' %}">ê²Œì„í•˜ê¸°</a></li>
        <li><a href="{% url 'cardgame:game_rank' %}">ë­í‚¹ë³´ê¸°</a></li>
        <li><a href="{% url 'account_logout' %}">ë¡œê·¸ì•„ì›ƒ</a></li>
      </ul>
    </nav>
    <div class="content">
      {% block content %} {% if user.is_authenticated %}
        <div class="title">
          <span>ê²Œì„ ì „ì </span>
          <p>
            í˜„ì¬ í”Œë ˆì´ì–´ì˜ ê²Œì„ ì „ì ì„ ë³´ì—¬ì£¼ëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤. ì €í¬ 4ì¡° ì •ë§ ì˜í•˜ì§€ ì•Šì•˜ë‚˜ìš”?<br>
            ì§„í–‰ ì¤‘ì¸ ê²Œì„ì€ ì·¨ì†Œí•  ìˆ˜ ìˆì–´ìš”! ë¬¼ë¡  ìì‹ ì´ ê³µê²©í•œ ê²Œì„ì—ë§Œ í•´ë‹¹ë˜ê² ì£ ?
          </p>
        </div>
        <div class="player">ğŸ˜ í˜„ì¬ í”Œë ˆì´ì–´ : {{user.username}}</div>
        {% for game in games reversed %}
        <div class="content-box">
          <div style="display:flex">
            <span class="rank-num">{{game.id}}</span>
            <div class="versus">{{game.attacker.username}}</div>
            <div class="vs">ã€€VSã€€</div>
            <div class="versus">{{game.defender.username}}</div>
          </div>
          <div class="result_detail">
            {% if game in status_proceed %}
              {% if game.attacker.username == current_user.username %}
                  <div>ì§„í–‰ì¤‘...<a class="cancel_btn box-btn" href="{% url 'cardgame:game_delete' pk=game.id%}">ê²Œì„ ì·¨ì†Œ</a></div>
              {% elif game.defender.username == current_user.username %}
                  <a class="defend_btn box-btn" href="{% url 'cardgame:defend' pk=game.id%}">ë°˜ê²©í•˜ê¸°</a>
              {% endif %}
              <a class="inform_btn box-btn" href="{% url 'cardgame:game_detail' pk=game.id %}">ê²Œì„ ì •ë³´</a>
            {% endif %}
            {% if game in stauts_end %}
              {% if game.attack_card == game.defend_card %}
                <div>ê²°ê³¼ : ë¬´ìŠ¹ë¶€ğŸ‘Š</div>
              {% elif game.victory_user.username == current_user.username %}
                  <div>ê²°ê³¼ : ìŠ¹ë¦¬ğŸ‘</div>
              {% elif game.victory_user.username != current_user.username %}
                  <div>ê²°ê³¼ : íŒ¨ë°°ğŸ‘</div>
              {% endif %}
              <a class="inform_btn box-btn" href="{% url 'cardgame:game_detail' pk=game.id %}">ê²Œì„ ì •ë³´</a>
            {% endif %}
          </div>
        </div>
        {% endfor %}
        {% else %}
        <script type="text/javascript">
          alert('ë¨¼ì € ë¡œê·¸ì¸ì„ í•´ì£¼ì„¸ìš”ğŸ¥º')
          window.location.href = '{% url 'account_login' %}';
        </script>
        {% endif %} {% endblock content %}
    </div>
      <footer class="footer">
        <div class="footer-title">í”¼ë¡œê·¸ë˜ë° 17ê¸° í™”ì´íŒ… ~ ~ â‚© ìµœê°•4ì¡°</div>
        <div class="footer-content">
          ë­ë¼ì“°ì§€ ë­ë¼ì“°ì§€ ë­ë¼ì“°ì§€ | ì¡°í•˜ì—° ì‹¬ì€ì„œ ì´í˜„ì˜ ì¥ëª…ì§€ ì¡°ì„í˜„
        </div>
      </footer>
  </body>
</html>